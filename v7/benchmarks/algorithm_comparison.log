================================================================================
COMPREHENSIVE ANN ALGORITHM COMPARISON
================================================================================

Algorithms:
  1. HNSW - Hierarchical Navigable Small World
  2. IVF - Inverted File Index (flat)
  3. IVF+PQ - IVF with Product Quantization
  4. ZGQ Unified - Zone-aware Graph Quantization (our method)

Loading test data...
  Vectors: (10000, 128)
  Queries: (100, 128)
  Ground truth: (100, 10)

================================================================================
1/4: HNSW Baseline
================================================================================

================================================================================
Benchmarking: HNSW
================================================================================

Building index...

================================================================================
Building HNSW Index
================================================================================
Parameters: M=16, ef_construction=200
Database: N=10,000 vectors, d=128 dimensions
  Inserted 10,000/10,000 vectors (100.0%) - 36602 vec/s - ETA: 0.0s

================================================================================
HNSW Build Complete
================================================================================
Build time: 0.273s (36598 vec/s)
Max level: N/A
Average degree: 16.00
Memory usage: 6.4 MB

Warming up...

Benchmarking search...

================================================================================
Results: HNSW
================================================================================
Build time:       0.273s
Query latency:    0.0195ms
Throughput:       51,156 QPS
Recall@10:        55.1%
Memory:           6.1 MB

================================================================================
2/4: IVF (Flat, no compression)
================================================================================

================================================================================
Benchmarking: IVF
================================================================================

Building index...

================================================================================
Building IVF Index
================================================================================
Parameters: nlist=100, nprobe=10, use_pq=False
Database: N=10,000 vectors, d=128 dimensions

Step 1: Running K-Means clustering...
  K-Means completed in 0.332s

Step 2: Building inverted lists...
  Cluster sizes: avg=100.0, max=170, min=3

================================================================================
IVF Build Complete
================================================================================
Build time: 0.335s (29885 vec/s)
Memory usage: 5.3 MB

Warming up...

Benchmarking search...

================================================================================
Results: IVF
================================================================================
Build time:       0.335s
Query latency:    0.8278ms
Throughput:       1,208 QPS
Recall@10:        37.6%
Memory:           4.9 MB

================================================================================
3/4: IVF+PQ (with Product Quantization)
================================================================================

================================================================================
Benchmarking: IVF+PQ
================================================================================

Building index...

================================================================================
Building IVF Index
================================================================================
Parameters: nlist=100, nprobe=10, use_pq=True
PQ Parameters: m=16, nbits=8
Database: N=10,000 vectors, d=128 dimensions

Step 1: Running K-Means clustering...
  K-Means completed in 0.252s

Step 2: Building inverted lists...
  Cluster sizes: avg=100.0, max=170, min=3

Step 3: Training Product Quantization...

======================================================================
Training Product Quantization
======================================================================
  Training samples: 10,000
  Dimension: 128
  Subspaces (m): 16
  Subspace dim (d/m): 8
  Codebook size (k): 256
  Memory per codebook: 8.0 KB
  Training subspace 1/16...  Training subspace 2/16...  Training subspace 3/16...  Training subspace 4/16...  Training subspace 5/16...  Training subspace 6/16...  Training subspace 7/16...  Training subspace 8/16...  Training subspace 9/16...  Training subspace 10/16...  Training subspace 11/16...  Training subspace 12/16...  Training subspace 13/16...  Training subspace 14/16...  Training subspace 15/16...  Training subspace 16/16...  Training subspace 16/16... ‚úì
  Total codebook memory: 0.12 MB

  Encoding 10,000 vectors with PQ...
    Subspace 1/16...    Subspace 2/16...    Subspace 3/16...    Subspace 4/16...    Subspace 5/16...    Subspace 6/16...    Subspace 7/16...    Subspace 8/16...    Subspace 9/16...    Subspace 10/16...    Subspace 11/16...    Subspace 12/16...    Subspace 13/16...    Subspace 14/16...    Subspace 15/16...    Subspace 16/16...    Subspace 16/16... ‚úì
    Code memory: 0.15 MB
    Original memory: 4.88 MB
    Compression ratio: 32.0√ó
  PQ training completed in 3.577s
  Compression: 5.1MB ‚Üí 0.2MB (ratio: 32.0√ó)

================================================================================
IVF Build Complete
================================================================================
Build time: 3.834s (2608 vec/s)
Memory usage: 0.4 MB

Warming up...

Benchmarking search...

================================================================================
Results: IVF+PQ
================================================================================
Build time:       3.834s
Query latency:    6.4641ms
Throughput:       155 QPS
Recall@10:        19.0%
Memory:           5.2 MB

================================================================================
4/4: ZGQ Unified (our method)
================================================================================

================================================================================
Benchmarking: ZGQ Unified
================================================================================

Building index...

Warming up...

Benchmarking search...

================================================================================
Results: ZGQ Unified
================================================================================
Build time:       0.469s
Query latency:    0.0634ms
Throughput:       15,772 QPS
Recall@10:        55.2%
Memory:           4.9 MB

================================================================================
COMPREHENSIVE COMPARISON TABLE
================================================================================

Algorithm       Latency (ms)    Throughput      Recall@10    Memory (MB)  Build (s) 
--------------------------------------------------------------------------------
HNSW            0.0195          51156           55.1         6.1          0.273     
IVF             0.8278          1208            37.6         4.9          0.335     
IVF+PQ          6.4641          155             19.0         5.2          3.834     
ZGQ Unified     0.0634          15772           55.2         4.9          0.469     

================================================================================
SPEEDUP vs HNSW (baseline)
================================================================================

Algorithm       Speed           Memory          Recall Diff    
------------------------------------------------------------
HNSW            1.00x           1.00x ‚úì         +0.0% ‚úì        
IVF             0.02x ‚úó         0.81x ‚úì         -17.5%         
IVF+PQ          0.00x ‚úó         0.85x ‚úì         -36.1%         
ZGQ Unified     0.31x ‚úó         0.81x ‚úì         +0.1% ‚úì        

================================================================================
WINNER ANALYSIS
================================================================================

üèÜ Fastest Query:      HNSW (0.0195ms)
üèÜ Highest Recall:     ZGQ Unified (55.2%)
üèÜ Lowest Memory:      IVF (4.9 MB)
üèÜ Highest Throughput: HNSW (51,156 QPS)

================================================================================
OVERALL SCORE (weighted)
================================================================================

Weights: Speed 40%, Recall 30%, Memory 20%, Build 10%

HNSW            Score: 0.865
IVF             Score: 0.451
IVF+PQ          Score: 0.300
ZGQ Unified     Score: 0.595

‚úì Results saved to: /home/nathan/Development/dbms-research/v7/benchmarks/algorithm_comparison_results.json

================================================================================
BENCHMARK COMPLETE
================================================================================
